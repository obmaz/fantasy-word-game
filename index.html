<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÌÇπÏôïÏß± RPG</title>
    <link rel="stylesheet" href="styles/variables.css">
    <link rel="stylesheet" href="styles/animations.css">
    <link rel="stylesheet" href="styles/title.css">
    <link rel="stylesheet" href="styles/battle-mode-game.css">
    <link rel="stylesheet" href="styles/modal-common.css">
    <link rel="stylesheet" href="styles/practice-mode-modal.css">
    <link rel="stylesheet" href="styles/battle-mode-modal.css">
    <link rel="stylesheet" href="styles/practice-mode-game.css">
    <link rel="stylesheet" href="styles/battle-mode-screen.css">
    <link rel="stylesheet" href="styles/boss-mode-screen.css">
    <link rel="stylesheet" href="styles/buttons.css">
    <link rel="stylesheet" href="styles/shop-panel.css">
    <link rel="stylesheet" href="styles/inventory-panel.css">
    <link rel="stylesheet" href="styles/statistics-panel.css">
    <link rel="stylesheet" href="styles/setting-panel.css">
    <link rel="stylesheet" href="styles/result-panel.css">
</head>

<body>

    <div id="game-screen" style="display:none; height:100%; flex-direction:column;">
        <div class="battle-arena">
            <div class="info-badge" id="wave-badge">Wave: 1</div>
            <div class="info-badge" id="game-info-badge">Î∞∞ÌãÄ Î™®Îìú - Day 1</div>
            <div class="durability-badge" id="durability-badge">ü•ä 30/30</div>
            <!-- Î∞∞Í≤Ω ÏúÑÏóê Í≥®ÎìúÏôÄ ÏãúÍ∞Ñ ÌëúÏãú -->
            <div class="overlay-gold">üí∞ <span id="overlay-gold">0</span> G</div>
            <div class="overlay-timer">
                <div class="timer-bar-bg">
                    <div id="overlay-timer" class="timer-bar-fill"></div>
                </div>
            </div>

            <div class="char-wrapper" id="hero-wrapper">
                <div id="hero-head" class="hero-equip-slot"></div>
                <div id="hero-hand-1" class="hero-equip-slot"></div>
                <div id="hero-hand-2" class="hero-equip-slot"></div>
                <div id="hero-feet" class="hero-equip-slot"></div>
                <img id="hero-img" class="char-img" src="" alt="Hero">
                <div id="hero-weapon" class="equipped-weapon"></div>
                <div id="hero-effect" class="hero-effect" style="display:none;"></div>
            </div>

            <div class="effect-layer">
                <div id="effect-slash"></div>
                <div id="effect-void-bg" class="slash-void-bg"></div>
                <div id="effect-void-core" class="slash-void-core"></div>
            </div>

            <div class="char-wrapper">
                <img id="monster-img" class="char-img" src="" alt="Monster">
            </div>
            <div id="dmg-txt" class="damage-txt"></div>
        </div>

        <div class="quiz-area">
            <div class="question-box">
                <div class="q-label" id="q-label">MEANING</div>
                <div class="q-text" id="q-text">Loading...</div>
            </div>

            <div id="skill-display" class="skill-bar"></div>

            <div id="options-box" class="options-grid"></div>

            <div id="boss-box" class="boss-ui">
                <div style="text-align:center; color:#FF5252; font-weight:bold;" id="boss-title">‚ö†Ô∏è FINAL BOSS</div>
                <div id="boss-hint" class="boss-hint"></div>
                <input type="text" id="boss-input" class="boss-input" placeholder="Ï†ïÎãµ ÏûÖÎ†•" autocomplete="off">
                <button class="boss-submit" onclick="game.checkBossAnswer()">Í≥µÍ≤©ÌïòÍ∏∞</button>
            </div>

        </div>
    </div>

    <div id="start-screen" class="screen-overlay">
        <!-- Title container - constrains buttons within image bounds -->
        <div class="title-container-wrapper">
            <!-- Game title header image (randomly loaded) -->
            <img id="title-header-img" src="images/title/title_header_1.webp" alt="Game Title" class="title-header" />
            <!-- Background image - displayed vertically centered, full height visible -->
            <img src="images/title/title.webp" alt="Title Screen" class="title-background" />
            
            <!-- Button overlay - matches image size exactly -->
            <div class="title-buttons-overlay">
                <!-- Gold display on title screen -->
                <div class="title-gold-display">üí∞ <span id="title-ui-gold">0</span> G</div>
                <!-- Game Data Selector (options are dynamically populated by data-loader.js) -->
                <select id="game-data-selector" class="title-data-selector" title="Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞ ÏÑ†ÌÉù">
                    <option value="1">Îä•Î•† Î≥¥Ïπ¥ Ï§ëÎì± Í∏∞Î≥∏</option>
                    <option value="2">ÏõåÎìú ÎßàÏä§ÌÑ∞ Ï§ëÎì± Í≥†ÎÇúÎèÑ</option>
                </select>
                <!-- Interactive button areas (invisible overlays on image buttons) -->
                <!-- PRACTICE MODE = Ïó∞Ïäµ Î™®Îìú -->
                <button class="title-btn-area content-visible" id="title-practice-btn" title="Ïó∞Ïäµ Î™®Îìú (PRACTICE MODE)">
                    <img src="images/title/practice_mode_btn.webp" alt="Practice Mode" class="btn-image">
                </button>
                <!-- BATTLE MODE = Î∞∞ÌãÄ Î™®Îìú -->
                <button class="title-btn-area content-visible" id="title-battle-mode-btn" title="Î∞∞ÌãÄ Î™®Îìú (BATTLE MODE)">
                    <img src="images/title/battle_mode_btn.webp" alt="Battle Mode" class="btn-image">
                </button>
                <!-- BOSS MODE = Î¨¥ÌïúÏùò Ï†ÑÏû• -->
                <button class="title-btn-area content-visible" id="title-boss-mode-btn" title="Î¨¥ÌïúÏùò Ï†ÑÏû• (BOSS MODE)">
                    <img src="images/title/boss_mode_btn.webp" alt="Boss Mode" class="btn-image">
                </button>
                
                <!-- shop = ÏÉÅÏ†ê -->
                <button class="title-btn-area content-visible" id="title-shop-btn" title="ÏÉÅÏ†ê (SHOP)">
                    <img src="images/title/shop_btn.webp" alt="Shop" class="btn-image">
                </button>
                <!-- profile = Ïù∏Î≤§ÌÜ†Î¶¨ -->
                <button class="title-btn-area content-visible" id="title-profile-btn" title="Ïù∏Î≤§ÌÜ†Î¶¨ (PROFILE)">
                    <img src="images/title/inventory_btn.webp" alt="Inventory" class="btn-image">
                </button>
                <!-- statistics = ÌÜµÍ≥Ñ -->
                <button class="title-btn-area content-visible" id="title-statistics-btn" title="ÌÜµÍ≥Ñ (STATISTICS)">
                    <img src="images/title/statistics_btn.webp" alt="Statistics" class="btn-image">
                </button>
                <!-- setting = secret Î©îÎâ¥ (ÌÇπ Í∏ÄÏûê ÌÅ¥Î¶≠ ÏòÅÏó≠) -->
                <button class="title-btn-area content-visible" id="title-setting-btn" title="ÏãúÏä§ÌÖú ÏÑ§Ï†ï (SETTING)">
                    <img src="images/title/settings_btn.webp" alt="Settings" class="btn-image">
                </button>
            </div>
        </div>
        
        <!-- Hidden UI elements (kept for functionality but not displayed) -->
        <div style="display: none;">
            <div class="stats-box" id="stat-solved">0</div>
            <div class="stat-item" id="stat-correct">0</div>
            <div class="stat-item" id="stat-rate">0%</div>
            <div id="equipped-summary" class="equipped-summary"></div>
            <select id="day-select"></select>
            <select id="count-select">
                <option value="5">5 ÎßàÎ¶¨ (Ïâ¨ÏõÄ)</option>
                <option value="10" selected>10 ÎßàÎ¶¨ (Î≥¥ÌÜµ)</option>
                <option value="20">20 ÎßàÎ¶¨ (Ïñ¥Î†§ÏõÄ)</option>
            </select>
        </div>
        
        <!-- Hidden buttons for functionality (kept for event listeners) -->
        <button class="btn-main" id="start-battle-btn" style="display: none;">Ï†ÑÌà¨ ÏãúÏûë ‚öîÔ∏è</button>
        <button class="btn-main btn-boss-mode" id="boss-mode-btn" style="display: none;">üî• Î≥¥Ïä§ Î™®Îìú (Î¨¥Ìïú)</button>
        <button class="btn-main btn-shop" onclick="shop.open()" style="display: none;">ÏÉÅÏ†ê üõí</button>
        <button class="btn-main btn-inv" onclick="inventory.open()" style="display: none;">Ïù∏Î≤§ÌÜ†Î¶¨ üéí</button>
    </div>

    <div id="inventory-screen" class="screen-overlay" style="display:none;">
        <div class="card rpg-panel">
            <div id="inv-item-detail" style="display:none;">
                <div id="detail-header">
                    <div id="detail-icon"></div>
                    <div id="detail-name"></div>
                    <button id="detail-close" onclick="inventory.hideDetails()">X</button>
                </div>
                <div id="detail-desc"></div>
                <div id="detail-actions"></div>
            </div>

            <div class="shop-header">
                <h2>Ïù∏Î≤§ÌÜ†Î¶¨</h2>
                <div style="color:var(--gold);">Î≥¥Ïú† Í≥®Îìú: <span id="inv-gold">0</span> G</div>
            </div>
            <div class="inv-container">
                <div class="inv-player">

                    <!-- Head / hands / torso layout for "ÏÇ¨Îûå Î™®Ïñë" Ïä¨Î°Ø -->
                    <div class="inv-head" style="margin-bottom:8px;">
                        <div class="inv-slot" id="inv-head" role="button" tabindex="0" aria-label="Î®∏Î¶¨ Ïä¨Î°Ø"
                            onclick="inventory.unequip('head')"></div>
                    </div>

                    <div class="inv-body">
                        <div class="inv-slot" id="inv-hand-2" role="button" tabindex="0" aria-label="ÏôºÏÜê Ïä¨Î°Ø"
                            onclick="inventory.unequip('hand-2')"></div>
                        <div class="inv-torso">
                            <div class="inv-slot" id="inv-weapon" role="button" tabindex="0" aria-label="Î¨¥Í∏∞ Ïä¨Î°Ø"
                                onclick="inventory.unequip('weapon')"></div>
                        </div>
                        <div class="inv-slot" id="inv-hand-1" role="button" tabindex="0" aria-label="Ïò§Î•∏ÏÜê Ïä¨Î°Ø"
                            onclick="inventory.unequip('hand-1')"></div>
                    </div>

                    <div class="inv-legs">
                        <div class="inv-slot" id="inv-foot-1" role="button" tabindex="0" aria-label="ÏôºÎ∞ú Ïä¨Î°Ø"
                            onclick="inventory.unequip('foot-1')"></div>
                        <div class="inv-slot" id="inv-foot-2" role="button" tabindex="0" aria-label="Ïò§Î•∏Î∞ú Ïä¨Î°Ø"
                            onclick="inventory.unequip('foot-2')"></div>
                    </div>
                </div>
                <div class="inv-storage">
                    <h3 class="inv-section-title">Î≥¥Í¥ÄÌï® (Ïû•ÎπÑ)</h3>
                    <div class="inv-items">
                    </div>
                    <div class="inv-capacity">Ïö©Îüâ: <span id="inv-cap">0</span> / <span id="inv-max-cap">3</span></div>

                    <h3 class="inv-section-title" style="margin-top: 16px;">Î≥¥Ïú† Ïú†Î¨º</h3>
                    <div class="inv-relics">
                    </div>
                </div>
            </div>
            <img id="inv-close-btn" src="images/title/exit_btn.webp" alt="ÎÇòÍ∞ÄÍ∏∞" onclick="inventory.close()"
                aria-label="Ïù∏Î≤§ÌÜ†Î¶¨ Îã´Í∏∞" style="width: 80%; height: auto; display: block; margin: 0 auto; cursor: pointer; object-fit: contain;">
        </div>
    </div>


    <!-- Practice Mode Selection Modal -->
    <div id="practice-mode-modal" class="screen-overlay" style="display:none;">
        <div class="modal-container-wrapper">
            <img src="images/practice_mode/practice_mode_select_popup .webp" alt="Practice Mode Settings" class="modal-background" id="practice-mode-modal-background-img" />
            <div class="modal-buttons-overlay">
                <!-- Î™®Îã¨ ÌÉÄÏù¥ÌãÄ -->
                <div class="modal-title">Ïó∞ÏäµÎ™®Îìú</div>
                
                <!-- Î™®Ìóò ÏßÄÏó≠ ÎìúÎ°≠Î∞ïÏä§ ÏòÅÏó≠ -->
                <select id="practice-mode-modal-day-select" class="modal-select modal-day-select"></select>
                
                <!-- ÎÇúÏù¥ÎèÑ ÎìúÎ°≠Î∞ïÏä§ ÏòÅÏó≠ -->
                <select id="practice-mode-modal-count-select" class="modal-select modal-count-select">
                    <option value="5">5 ÎßàÎ¶¨ (Ïâ¨ÏõÄ)</option>
                    <option value="10" selected>10 ÎßàÎ¶¨ (Î≥¥ÌÜµ)</option>
                    <option value="20">20 ÎßàÎ¶¨ (Ïñ¥Î†§ÏõÄ)</option>
                </select>
                
                <!-- ÏãúÏûëÌïòÍ∏∞ Î≤ÑÌäº ÏòÅÏó≠ -->
                <button class="modal-btn-area" id="practice-mode-modal-start-btn" title="ÏãúÏûëÌïòÍ∏∞"></button>
                
                <!-- Ï∑®ÏÜå Î≤ÑÌäº ÏòÅÏó≠ -->
                <button class="modal-btn-area" id="practice-mode-modal-cancel-btn" title="Ï∑®ÏÜå"></button>
            </div>
        </div>
    </div>

    <!-- Battle Mode Selection Modal -->
    <div id="battle-mode-setting-modal" class="screen-overlay" style="display:none;">
        <div class="modal-container-wrapper">
            <img src="images/battle_mode/battle_mode_select_popup.webp" alt="Battle Mode Settings" class="modal-background" id="battle-mode-setting-modal-background-img" />
            <div class="modal-buttons-overlay">
                <!-- Î™®Ìóò ÏßÄÏó≠ ÎìúÎ°≠Î∞ïÏä§ ÏòÅÏó≠ -->
                <select id="battle-mode-setting-modal-day-select" class="modal-select modal-day-select"></select>
                
                <!-- ÎÇúÏù¥ÎèÑ ÎìúÎ°≠Î∞ïÏä§ ÏòÅÏó≠ -->
                <select id="battle-mode-setting-modal-count-select" class="modal-select modal-count-select">
                    <option value="5">5 ÎßàÎ¶¨ (Ïâ¨ÏõÄ)</option>
                    <option value="10" selected>10 ÎßàÎ¶¨ (Î≥¥ÌÜµ)</option>
                    <option value="20">20 ÎßàÎ¶¨ (Ïñ¥Î†§ÏõÄ)</option>
                </select>
                
                <!-- Î¨∏Ï†ú ÌÉÄÏûÖ ÎùºÎîîÏò§ Î≤ÑÌäº (Battle Mode Ï†ÑÏö©) -->
                <div id="battle-mode-setting-modal-question-type-group" class="modal-radio-group">
                    <label class="modal-radio-label">
                        <input type="radio" name="battle-question-type" value="objective" class="modal-radio">
                        <span class="modal-radio-text">Í∞ùÍ¥ÄÏãù</span>
                    </label>
                    <label class="modal-radio-label">
                        <input type="radio" name="battle-question-type" value="mixed" checked class="modal-radio">
                        <span class="modal-radio-text">ÌòºÌï©Ìòï</span>
                    </label>
                    <label class="modal-radio-label">
                        <input type="radio" name="battle-question-type" value="subjective" class="modal-radio">
                        <span class="modal-radio-text">Ï£ºÍ¥ÄÏãù</span>
                    </label>
                </div>
                
                <!-- ÏãúÏûëÌïòÍ∏∞ Î≤ÑÌäº ÏòÅÏó≠ -->
                <button class="modal-btn-area" id="battle-mode-setting-modal-start-btn" title="ÏãúÏûëÌïòÍ∏∞"></button>
                
                <!-- Ï∑®ÏÜå Î≤ÑÌäº ÏòÅÏó≠ -->
                <button class="modal-btn-area" id="battle-mode-setting-modal-cancel-btn" title="Ï∑®ÏÜå"></button>
            </div>
        </div>
    </div>

    <!-- Practice Mode Memorization Screen (Îã®Ïñ¥ ÏïîÍ∏∞ ÌôîÎ©¥) -->
    <div id="practice-memorization-screen" style="display:none; height:100%; flex-direction:column;">
        <div class="practice-memorization-container">
            <!-- Î∞∞ÌãÄ ÏïÑÎ†àÎÇò ÏòÅÏó≠ (Î∞∞ÌãÄ Î™®ÎìúÏôÄ Ïú†ÏÇ¨) -->
            <div class="practice-memorization-arena">
                <!-- ÏÉÅÎã®: Day Ï†ïÎ≥¥ Î∞è Îã®Ïñ¥ Î≤àÌò∏ -->
                <div class="practice-memorization-header">
                    <div class="practice-day-info" id="practice-memorization-day-info"></div>
                    <div class="practice-word-counter" id="practice-word-counter">1 / 1</div>
                </div>
            </div>
            
            <!-- Ï§ëÏïô: Îã®Ïñ¥ ÌëúÏãú ÏòÅÏó≠ (Î∞∞ÌãÄ Î™®ÎìúÏùò quiz-areaÏôÄ Ïú†ÏÇ¨) -->
            <div class="practice-memorization-content">
                <!-- ÏòÅÏñ¥ Îã®Ïñ¥ -->
                <div class="practice-word-section">
                    <div class="practice-word-text" id="practice-word-text">Loading...</div>
                </div>
                
                <!-- ÌïúÍ∏Ä Îúª -->
                <div class="practice-meaning-section">
                    <div class="practice-meaning-text" id="practice-meaning-text">Loading...</div>
                </div>
                
                <!-- ÏòÅÎ¨∏ Î¨∏Ïû• (English Explanation) -->
                <div class="practice-explanation-section">
                    <div class="practice-label">ÏòÅÎ¨∏ ÏÑ§Î™Ö</div>
                    <div class="practice-explanation-text" id="practice-explanation-text">Loading...</div>
                </div>
            </div>
            
            <!-- ÌïòÎã®: ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò Î≤ÑÌäº -->
            <div class="practice-memorization-navigation">
                <button class="practice-nav-btn" id="practice-prev-btn" title="Ïù¥Ï†Ñ Îã®Ïñ¥">‚óÄ Ïù¥Ï†Ñ</button>
                <button class="practice-nav-btn practice-nav-exit" id="practice-exit-btn" title="ÎÇòÍ∞ÄÍ∏∞">ÎÇòÍ∞ÄÍ∏∞</button>
                <button class="practice-nav-btn" id="practice-next-btn" title="Îã§Ïùå Îã®Ïñ¥">Îã§Ïùå ‚ñ∂</button>
            </div>
        </div>
    </div>

    <!-- Battle Mode Screen (battle Î™®ÎìúÏö©) - boss_mode_popup.webpÎ•º Î™®Îì† Î™®ÎìúÏùò Ïä§ÌÜ†Î¶¨ ÌôîÎ©¥ Î∞∞Í≤ΩÏúºÎ°ú ÏÇ¨Ïö© -->
    <div id="battle-mode-screen" class="screen-overlay" style="display:none;">
        <div class="story-container-wrapper">
            <img src="images/battle_mode/boss_mode_popup.webp" alt="Adventure Start" class="story-background" id="battle-mode-background-img" />
            <div class="story-buttons-overlay">
                <!-- Î™®ÌóòÏãúÏûë Î≤ÑÌäº ÏòÅÏó≠ (Ïù¥ÎØ∏ÏßÄÏùò "Î™®Ìóò ÏãúÏûë" Î∂ÄÎ∂Ñ) -->
                <button class="story-btn-area" id="battle-mode-start-btn" title="Î™®Ìóò ÏãúÏûë"></button>
            </div>
            <!-- Day Ï†ïÎ≥¥ ÌëúÏãú ÏòÅÏó≠ -->
            <div class="story-day-info" id="battle-mode-day-info"></div>
            <!-- Ïù¥ÏïºÍ∏∞ ÌÖçÏä§Ìä∏ ÏòÅÏó≠ -->
            <div class="story-text-container">
                <div class="story-text-content" id="battle-mode-text"></div>
            </div>
        </div>
    </div>

    <!-- Boss Mode Screen (boss Î™®ÎìúÏö©) - boss_mode_popup.webpÎ•º Î™®Îì† Î™®ÎìúÏùò Ïä§ÌÜ†Î¶¨ ÌôîÎ©¥ Î∞∞Í≤ΩÏúºÎ°ú ÏÇ¨Ïö© -->
    <div id="boss-mode-screen" class="screen-overlay" style="display:none;">
        <div class="story-container-wrapper">
            <img src="images/battle_mode/boss_mode_popup.webp" alt="Adventure Start" class="story-background" id="boss-mode-background-img" />
            <div class="story-buttons-overlay">
                <!-- Î™®ÌóòÏãúÏûë Î≤ÑÌäº ÏòÅÏó≠ (Ïù¥ÎØ∏ÏßÄÏùò "Î™®Ìóò ÏãúÏûë" Î∂ÄÎ∂Ñ) -->
                <button class="story-btn-area" id="boss-mode-start-btn" title="Î™®Ìóò ÏãúÏûë"></button>
            </div>
            <!-- Day Ï†ïÎ≥¥ ÌëúÏãú ÏòÅÏó≠ -->
            <div class="story-day-info" id="boss-mode-day-info"></div>
            <!-- Ïù¥ÏïºÍ∏∞ ÌÖçÏä§Ìä∏ ÏòÅÏó≠ -->
            <div class="story-text-container">
                <div class="story-text-content" id="boss-mode-text"></div>
            </div>
        </div>
    </div>

    <div id="shop-screen" class="screen-overlay" style="display:none;">
        <div class="card rpg-panel">
            <div class="shop-header">
                <h2>ÏÉÅÏ†ê</h2>
                <div style="color:var(--gold);">Î≥¥Ïú† Í≥®Îìú: <span id="shop-gold">0</span> G</div>
            </div>
            <div class="shop-body">
                <div id="shop-container" style="text-align:left;"></div>
            </div>
            <div class="shop-footer">
                <img src="images/title/exit_btn.webp" alt="ÎÇòÍ∞ÄÍ∏∞" onclick="shop.close()" style="width: 80%; height: auto; display: block; margin: 0 auto; cursor: pointer; object-fit: contain;">
            </div>
        </div>
    </div>

    <div id="statistics-screen" class="screen-overlay" style="display:none;">
        <div class="card rpg-panel">
            <div class="shop-header">
                <h2>ÌÜµÍ≥Ñ</h2>
                <div style="color:var(--gold);">Î≥¥Ïú† Í≥®Îìú: <span id="statistics-gold">0</span> G</div>
            </div>
            <div class="shop-body">
                <div id="statistics-container" style="text-align:left;"></div>
            </div>
            <div class="shop-footer">
                <img src="images/title/exit_btn.webp" alt="ÎÇòÍ∞ÄÍ∏∞" onclick="statistics.close()" style="width: 80%; height: auto; display: block; margin: 0 auto; cursor: pointer; object-fit: contain;">
            </div>
        </div>
    </div>

    <div id="result-screen" class="screen-overlay" style="display:none;">
        <div class="result-panel" role="dialog" aria-label="Í≤∞Í≥º">
            <div id="res-title" class="result-panel-title">FINISHED!</div>

            <div class="result-panel-body">
                <div class="result-panel-row">
                    <span class="result-label">Ïù¥Î≤à ÌöçÎìù</span>
                    <span class="result-value gold">+<span id="res-gain">0</span> G</span>
                </div>
                <div class="result-panel-row">
                    <span class="result-label">Ïù¥Î≤à ÏÜêÏã§</span>
                    <span class="result-value danger">-<span id="res-lost">0</span> G</span>
                </div>
                <div class="result-panel-total">
                    ÎÇ¥ ÏßÄÍ∞ë Ï¥ùÏï°: <span id="res-current-total">0</span> G
                </div>
            </div>

            <div class="result-panel-actions">
                <button class="result-btn result-btn-gold" onclick="closeResultScreen()">ÎßàÏùÑÎ°ú Í∑ÄÌôò</button>
            </div>
        </div>
    </div>



    <div id="setting-overlay" class="screen-overlay" style="display:none;">

        <div id="password-modal" class="card rpg-panel">

            <h3>ÎπÑÎ∞ÄÎ≤àÌò∏ ÏûÖÎ†•</h3>

            <div id="password-input-boxes" style="display: flex; gap: 5px; justify-content: center; margin: 20px 0;">



            </div>

            <p id="password-error" style="color:var(--danger); display:none;">ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÌãÄÎ†∏ÏäµÎãàÎã§.</p>

            <div id="password-numpad"
                style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; max-width: 200px; margin: 0 auto;">

                <button class="num-btn" onclick="secret.enter(1)">1</button>

                <button class="num-btn" onclick="secret.enter(2)">2</button>

                <button class="num-btn" onclick="secret.enter(3)">3</button>

                <button class="num-btn" onclick="secret.enter(4)">4</button>

                <button class="num-btn" onclick="secret.enter(5)">5</button>

                <button class="num-btn" onclick="secret.enter(6)">6</button>

                <button class="num-btn" onclick="secret.enter(7)">7</button>

                <button class="num-btn" onclick="secret.enter(8)">8</button>

                <button class="num-btn" onclick="secret.enter(9)">9</button>

                <button class="num-btn" onclick="secret.del()">‚å´</button>

                <button class="num-btn" onclick="secret.enter(0)">0</button>

                <img class="num-btn" src="images/title/exit_btn.webp" alt="Îã´Í∏∞" onclick="secret.close()" style="width: 60px; height: 60px; object-fit: contain; cursor: pointer; box-sizing: border-box;">

            </div>

        </div>



        <div id="gold-adjuster-modal" class="card rpg-panel" style="display:none;">



            <h3>ÏÑ§Ï†ï</h3>

            <div style="text-align: center; width: 100%; margin-top: 20px;">
                <button class="btn-main" onclick="secret.openGoldEditModal()" style="width: 80%; margin: 0 auto; display: block;">Í≥®Îìú ÏàòÏ†ï</button>
            </div>
            <div style="text-align: center; width: 100%; margin-top: 10px;">
                <button class="btn-main" onclick="secret.openPrintDaySelect()" style="width: 80%; margin: 0 auto; display: block;">Î¨∏Ï†ú Ï∂úÎ†•</button>
            </div>
            <div style="text-align: center; width: 100%; margin-top: 10px;">
                <button class="btn-main btn-danger" onclick="secret.resetStatistics()" style="width: 80%; margin: 0 auto; display: block;">ÌÜµÍ≥Ñ Ï¥àÍ∏∞Ìôî</button>
            </div>
            <div style="text-align: center; width: 100%; margin-top: 10px;">
                <img src="images/title/exit_btn.webp" alt="ÎÇòÍ∞ÄÍ∏∞" onclick="secret.close()" style="width: 80%; height: auto; display: block; margin: 0 auto; cursor: pointer; object-fit: contain;">
            </div>



        </div>



        <div id="gold-edit-modal" class="card rpg-panel" style="display:none;">

            <h3>Í≥®Îìú ÏàòÏ†ï</h3>

            <div class="gold-adjuster">

                <div class="gold-adjust-label">ÌòÑÏû¨ Í≥®Îìú</div>

                <div id="current-gold-edit-display" class="gold-display-box">0</div>

                <div class="gold-adjust-label">ÏÑ§Ï†ïÌï† Í≥®Îìú</div>

                <div class="gold-adjust-controls">

                    <button id="gold-edit-down" class="gold-arrow">‚ñº</button>

                    <div id="edit-gold-display" class="gold-display-box">0</div>

                    <button id="gold-edit-up" class="gold-arrow">‚ñ≤</button>

                </div>

            </div>

            <div style="text-align: center; width: 100%;">
                <img src="images/title/apply_btn.webp" alt="Ï†ÅÏö©" onclick="secret.applyGoldEdit()" style="width: 80%; height: auto; display: block; margin: 0 auto; cursor: pointer; object-fit: contain;">
            </div>
            <div style="text-align: center; width: 100%; margin-top: 10px;">
                <img src="images/title/exit_btn.webp" alt="ÎÇòÍ∞ÄÍ∏∞" onclick="secret.closeGoldEditModal()" style="width: 80%; height: auto; display: block; margin: 0 auto; cursor: pointer; object-fit: contain;">
            </div>

        </div>

        <div id="print-day-select-modal" class="card rpg-panel" style="display:none;">
            <h3>Day ÏÑ†ÌÉù</h3>
            <div style="margin: 20px 0;">
                <select id="print-day-select" class="btn-main" style="width: 100%; padding: 10px; font-size: 16px;">
                    <option value="">Day ÏÑ†ÌÉù...</option>
                </select>
            </div>
            <div style="text-align: center; width: 100%; margin-top: 20px;">
                <button class="btn-main" onclick="secret.generatePrintHTML()" style="width: 80%; margin: 0 auto; display: block;">Ïù∏ÏáÑÏö© HTML ÏÉùÏÑ±</button>
            </div>
            <div style="text-align: center; width: 100%; margin-top: 10px;">
                <img src="images/title/exit_btn.webp" alt="ÎÇòÍ∞ÄÍ∏∞" onclick="secret.closePrintDaySelect()" style="width: 80%; height: auto; display: block; margin: 0 auto; cursor: pointer; object-fit: contain;">
            </div>
        </div>

    </div>



    <!-- Load data files first (wrapped as JavaScript variables to avoid CORS) -->
    <script src="data/game-data-1.js"></script>
    <script src="data/game-data-2.js"></script>
    <script src="data/items-data.js"></script>
    <script src="scripts/data-loader.js"></script>
    <script src="scripts/words.js"></script>






    <script src="scripts/items.js"></script>



    <script src="scripts/app.js"></script>

    <!-- Background Music -->
    <audio id="background-music" loop>
        <source src="data/background_music.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Background music Ï¥àÍ∏∞Ìôî (Í≤åÏûÑ Ï§ëÏóêÎßå Ïû¨ÏÉù)
        window.addEventListener('load', () => {
            const bgMusic = document.getElementById('background-music');
            if (bgMusic) {
                bgMusic.volume = 0.5; // Î≥ºÎ•® Ï°∞Ï†à
                // ÌÉÄÏù¥ÌãÄÏóêÏÑúÎäî Ïû¨ÏÉùÌïòÏßÄ ÏïäÏùå (Í≤åÏûÑ ÏãúÏûë Ïãú Ïû¨ÏÉù)
            }
        });

        // Î∞±Î≤ÑÌäº Ï≤òÎ¶¨ (Í≤åÏûÑ Ï§ë, ÏÉÅÏ†ê, Ïù∏Î≤§ÌÜ†Î¶¨ÏóêÏÑú ÏãúÏûë ÌôîÎ©¥ÏúºÎ°ú)
        let isGameScreen = false;
        let isShopScreen = false;
        let isInventoryScreen = false;
        let isStatisticsScreen = false;
        let isSettingScreen = false;

        // ÌôîÎ©¥ ÏÉÅÌÉú Ï∂îÏ†Å
        const gameScreen = document.getElementById('game-screen');
        const shopScreen = document.getElementById('shop-screen');
        const inventoryScreen = document.getElementById('inventory-screen');
        const statisticsScreen = document.getElementById('statistics-screen');
        const settingScreen = document.getElementById('setting-overlay');
        const startScreen = document.getElementById('start-screen');

        // MutationObserverÎ°ú ÌôîÎ©¥ ÏÉÅÌÉú Í∞êÏßÄ
        const observer = new MutationObserver(() => {
            isGameScreen = gameScreen.style.display !== 'none';
            isShopScreen = shopScreen.style.display !== 'none';
            isInventoryScreen = inventoryScreen.style.display !== 'none';
            isStatisticsScreen = statisticsScreen && statisticsScreen.style.display !== 'none';
            isSettingScreen = settingScreen && settingScreen.style.display !== 'none';
        });

        observer.observe(gameScreen, { attributes: true, attributeFilter: ['style'] });
        observer.observe(shopScreen, { attributes: true, attributeFilter: ['style'] });
        observer.observe(inventoryScreen, { attributes: true, attributeFilter: ['style'] });
        if (statisticsScreen) {
            observer.observe(statisticsScreen, { attributes: true, attributeFilter: ['style'] });
        }
        if (settingScreen) {
            observer.observe(settingScreen, { attributes: true, attributeFilter: ['style'] });
        }

        // Î∞±Î≤ÑÌäº Ïù¥Î≤§Ìä∏ Ï≤òÎ¶¨ (Î™®Î∞îÏùº Î∏åÎùºÏö∞Ï†Ä)
        window.addEventListener('popstate', (e) => {
            const battleModeStoryScreen = document.getElementById('battle-mode-screen');
            const bossStoryScreen = document.getElementById('boss-mode-screen');
            const practiceModeModal = document.getElementById('practice-mode-modal');
            const battleModeModal = document.getElementById('battle-mode-setting-modal');
            const resultScreen = document.getElementById('result-screen');
            const practiceMemorizationScreen = document.getElementById('practice-memorization-screen');
            
            const isPracticeModeStoryScreen = false; // practice-mode-screenÏùÄ Îçî Ïù¥ÏÉÅ ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÏùå
            const isBattleModeStoryScreen = battleModeStoryScreen && battleModeStoryScreen.style.display !== 'none' && battleModeStoryScreen.style.display !== '';
            const isBossStoryScreen = bossStoryScreen && bossStoryScreen.style.display !== 'none' && bossStoryScreen.style.display !== '';
            const isPracticeModeModal = practiceModeModal && practiceModeModal.style.display !== 'none' && practiceModeModal.style.display !== '';
            const isBattleModeModal = battleModeModal && battleModeModal.style.display !== 'none' && battleModeModal.style.display !== '';
            const isResultScreen = resultScreen && resultScreen.style.display !== 'none' && resultScreen.style.display !== '';
            const isPracticeMemorizationScreen = practiceMemorizationScreen && practiceMemorizationScreen.style.display !== 'none' && practiceMemorizationScreen.style.display !== '';
            const printDaySelectModal = document.getElementById('print-day-select-modal');
            const isPrintDaySelectModal = printDaySelectModal && printDaySelectModal.style.display !== 'none' && printDaySelectModal.style.display !== '';
            const goldEditModal = document.getElementById('gold-edit-modal');
            const isGoldEditModal = goldEditModal && goldEditModal.style.display !== 'none' && goldEditModal.style.display !== '';
            const passwordModal = document.getElementById('password-modal');
            const isPasswordModal = passwordModal && passwordModal.style.display !== 'none' && passwordModal.style.display !== '';
            
            // Î¨∏Ï†úÏ∂úÎ†• Î™®Îã¨ÏóêÏÑú Î∞±Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ ÏÑ§Ï†ï ÌôîÎ©¥ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
            if (isPrintDaySelectModal) {
                if (typeof secret !== 'undefined' && typeof secret.closePrintDaySelect === 'function') {
                    secret.closePrintDaySelect();
                }
                // ÌûàÏä§ÌÜ†Î¶¨ Ï°∞Ïûë Î∞©ÏßÄ
                history.pushState(null, '', window.location.href);
                return; // Î¨∏Ï†úÏ∂úÎ†• Î™®Îã¨Îßå Ï≤òÎ¶¨ÌïòÍ≥† Ï¢ÖÎ£å
            }
            
            // Í≥®Îìú ÏàòÏ†ï Î™®Îã¨ÏóêÏÑú Î∞±Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ Í≥®Îìú Ï°∞Ï†ï ÌôîÎ©¥ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
            if (isGoldEditModal) {
                if (typeof secret !== 'undefined' && typeof secret.closeGoldEditModal === 'function') {
                    secret.closeGoldEditModal();
                }
                // ÌûàÏä§ÌÜ†Î¶¨ Ï°∞Ïûë Î∞©ÏßÄ
                history.pushState(null, '', window.location.href);
                return; // Í≥®Îìú ÏàòÏ†ï Î™®Îã¨Îßå Ï≤òÎ¶¨ÌïòÍ≥† Ï¢ÖÎ£å
            }
            
            // ÎπÑÎ∞ÄÎ≤àÌò∏ Î™®Îã¨ÏóêÏÑú Î∞±Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ ÎÇòÍ∞ÄÍ∏∞Ï≤òÎüº ÏßÅÏ†Ñ ÌôîÎ©¥ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
            if (isPasswordModal) {
                if (typeof secret !== 'undefined' && typeof secret.close === 'function') {
                    secret.close();
                }
                // ÌûàÏä§ÌÜ†Î¶¨ Ï°∞Ïûë Î∞©ÏßÄ
                history.pushState(null, '', window.location.href);
                return; // ÎπÑÎ∞ÄÎ≤àÌò∏ Î™®Îã¨Îßå Ï≤òÎ¶¨ÌïòÍ≥† Ï¢ÖÎ£å
            }
            
            // ÏÉÅÏ†êÏóêÏÑú Î∞±Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ ÎÇòÍ∞ÄÍ∏∞Ï≤òÎüº ÌÉÄÏù¥ÌãÄ ÌôîÎ©¥ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
            if (isShopScreen) {
                if (typeof shop !== 'undefined' && typeof shop.close === 'function') {
                    shop.close();
                }
                // ÌûàÏä§ÌÜ†Î¶¨ Ï°∞Ïûë Î∞©ÏßÄ
                history.pushState(null, '', window.location.href);
                return; // ÏÉÅÏ†êÎßå Ï≤òÎ¶¨ÌïòÍ≥† Ï¢ÖÎ£å
            }
            
            // Ïù∏Î≤§ÌÜ†Î¶¨ÏóêÏÑú Î∞±Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ ÎÇòÍ∞ÄÍ∏∞Ï≤òÎüº ÌÉÄÏù¥ÌãÄ ÌôîÎ©¥ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
            if (isInventoryScreen) {
                if (typeof inventory !== 'undefined' && typeof inventory.close === 'function') {
                    inventory.close();
                }
                // ÌûàÏä§ÌÜ†Î¶¨ Ï°∞Ïûë Î∞©ÏßÄ
                history.pushState(null, '', window.location.href);
                return; // Ïù∏Î≤§ÌÜ†Î¶¨Îßå Ï≤òÎ¶¨ÌïòÍ≥† Ï¢ÖÎ£å
            }
            
            // ÌÜµÍ≥ÑÏóêÏÑú Î∞±Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ ÎÇòÍ∞ÄÍ∏∞Ï≤òÎüº ÌÉÄÏù¥ÌãÄ ÌôîÎ©¥ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
            if (isStatisticsScreen) {
                if (typeof statistics !== 'undefined' && typeof statistics.close === 'function') {
                    statistics.close();
                }
                // ÌûàÏä§ÌÜ†Î¶¨ Ï°∞Ïûë Î∞©ÏßÄ
                history.pushState(null, '', window.location.href);
                return; // ÌÜµÍ≥ÑÎßå Ï≤òÎ¶¨ÌïòÍ≥† Ï¢ÖÎ£å
            }
            
            // ÏÑ§Ï†ïÏóêÏÑú Î∞±Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ ÎÇòÍ∞ÄÍ∏∞Ï≤òÎüº ÌÉÄÏù¥ÌãÄ ÌôîÎ©¥ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞ (ÌïòÏúÑ Î™®Îã¨Ïù¥ ÏóÜÏùÑ ÎïåÎßå)
            if (isSettingScreen && !isPrintDaySelectModal && !isGoldEditModal && !isPasswordModal) {
                if (typeof secret !== 'undefined' && typeof secret.close === 'function') {
                    secret.close();
                }
                // ÌûàÏä§ÌÜ†Î¶¨ Ï°∞Ïûë Î∞©ÏßÄ
                history.pushState(null, '', window.location.href);
                return; // ÏÑ§Ï†ïÎßå Ï≤òÎ¶¨ÌïòÍ≥† Ï¢ÖÎ£å
            }
            
            // Í≤∞Í≥º ÌôîÎ©¥ÏóêÏÑú Î∞±Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ ÎÇòÍ∞ÄÍ∏∞Ï≤òÎüº ÌÉÄÏù¥ÌãÄ ÌôîÎ©¥ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
            if (isResultScreen) {
                if (typeof closeResultScreen === 'function') {
                    closeResultScreen();
                }
                // ÌûàÏä§ÌÜ†Î¶¨ Ï°∞Ïûë Î∞©ÏßÄ
                history.pushState(null, '', window.location.href);
                return; // Í≤∞Í≥º ÌôîÎ©¥Îßå Ï≤òÎ¶¨ÌïòÍ≥† Ï¢ÖÎ£å
            }
            
            // Ïó∞Ïäµ Î™®Îìú Î™®Îã¨ÏóêÏÑú Î∞±Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ ÎÇòÍ∞ÄÍ∏∞Ï≤òÎüº ÌÉÄÏù¥ÌãÄ ÌôîÎ©¥ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
            if (isPracticeModeModal) {
                if (typeof closePracticeModal === 'function') {
                    closePracticeModal(false);
                }
                // start-screen ÌëúÏãú
                const startScreen = document.getElementById('start-screen');
                if (startScreen) {
                    startScreen.style.display = 'flex';
                    startScreen.style.zIndex = '';
                }
                // ÌûàÏä§ÌÜ†Î¶¨ Ï°∞Ïûë Î∞©ÏßÄ
                history.pushState(null, '', window.location.href);
                return; // Ïó∞Ïäµ Î™®Îìú Î™®Îã¨Îßå Ï≤òÎ¶¨ÌïòÍ≥† Ï¢ÖÎ£å
            }
            
            // Î∞∞ÌãÄ Î™®Îìú Î™®Îã¨ÏóêÏÑú Î∞±Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ ÎÇòÍ∞ÄÍ∏∞Ï≤òÎüº ÌÉÄÏù¥ÌãÄ ÌôîÎ©¥ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
            if (isBattleModeModal && !isBattleModeStoryScreen) {
                if (typeof closePracticeModal === 'function') {
                    closePracticeModal(false);
                }
                // start-screen ÌëúÏãú
                const startScreen = document.getElementById('start-screen');
                if (startScreen) {
                    startScreen.style.display = 'flex';
                    startScreen.style.zIndex = '';
                }
                // ÌûàÏä§ÌÜ†Î¶¨ Ï°∞Ïûë Î∞©ÏßÄ
                history.pushState(null, '', window.location.href);
                return; // Î∞∞ÌãÄ Î™®Îìú Î™®Îã¨Îßå Ï≤òÎ¶¨ÌïòÍ≥† Ï¢ÖÎ£å
            }
            
            if (isGameScreen || isPracticeModeStoryScreen || isBattleModeStoryScreen || isBossStoryScreen || isPracticeMemorizationScreen) {
                // Í≤åÏûÑ ÌôîÎ©¥ÏùÑ Îã´ÏùÑ Îïå ÌÉÄÏù¥Î®∏ Ï†ïÏßÄ Î∞è ÏÉÅÌÉú Î¶¨ÏÖã
                if (isGameScreen && typeof game !== 'undefined') {
                    if (game.timer) {
                        clearInterval(game.timer);
                        game.timer = null;
                    }
                    game.isProcessing = false; // Í≤åÏûÑ ÏÉÅÌÉú Î¶¨ÏÖãÌïòÏó¨ Îã§Ïãú ÏãúÏûë Í∞ÄÎä•ÌïòÎèÑÎ°ù
                }
                
                // Í≤åÏûÑ ÌôîÎ©¥Ïù¥ Îã´Ìûê Îïå Î∞∞Í≤ΩÏùåÏïÖ Ï†ïÏßÄ
                if (isGameScreen) {
                    const bgMusic = document.getElementById('background-music');
                    if (bgMusic && !bgMusic.paused) {
                        bgMusic.pause();
                        bgMusic.currentTime = 0; // Ï≤òÏùåÎ∂ÄÌÑ∞ Îã§Ïãú Ïû¨ÏÉùÎêòÎèÑÎ°ù Î¶¨ÏÖã
                    }
                }
                
                // Í≤åÏûÑ ÌôîÎ©¥Îßå Îã´Í∏∞
                gameScreen.style.display = 'none';
                
                // Î∞∞ÌãÄ Î™®Îìú Ïä§ÌÅ¨Î¶∞ÏóêÏÑú Î∞±Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ Î∞∞ÌãÄ Î™®Îìú Î™®Îã¨Î°ú ÎèåÏïÑÍ∞ÄÍ∏∞
                if (isBattleModeStoryScreen) {
                    closeScreenOverlay('battle-mode-screen', false);
                    // start-screenÏùò z-indexÏôÄ displayÎ•º Ï°∞Ï†ïÌïòÏó¨ backdrop-filterÍ∞Ä ÏûëÎèôÌïòÎèÑÎ°ù Ìï®
                    const startScreen = document.getElementById('start-screen');
                    if (startScreen) {
                        startScreen.style.zIndex = '100'; // Î™®Îã¨(z-index: 200) Îí§Ïóê ÏúÑÏπò
                        startScreen.style.display = 'flex'; // ÌëúÏãúÎêòÏñ¥ ÏûàÏñ¥Ïïº backdrop-filterÍ∞Ä ÏûëÎèô
                    }
                    // Î∞∞ÌãÄ Î™®Îìú Î™®Îã¨ Ïó¥Í∏∞
                    if (typeof openBattleModeModal === 'function') {
                        openBattleModeModal();
                    }
                } else {
                    // Îã§Î•∏ Ïä§ÌÜ†Î¶¨ ÌôîÎ©¥ÏùÄ ÏùºÎ∞òÏ†ÅÏúºÎ°ú Îã´Í∏∞
                    if (bossStoryScreen) {
                        bossStoryScreen.style.display = 'none';
                        bossStoryScreen.style.visibility = '';
                        bossStoryScreen.style.opacity = '';
                        bossStoryScreen.style.zIndex = '';
                        bossStoryScreen.style.pointerEvents = '';
                        bossStoryScreen.classList.remove('closing');
                    }
                }
                
                // Í≤åÏûÑ ÏÉÅÌÉú Î¶¨ÏÖã
                if ((isPracticeModeStoryScreen || isBattleModeStoryScreen || isBossStoryScreen) && typeof game !== 'undefined') {
                    game.isProcessing = false;
                }
                
                // Ïó∞Ïäµ Î™®Îìú ÌôîÎ©¥ÏóêÏÑú Î∞±Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ ÌÉÄÏù¥ÌãÄ ÌôîÎ©¥ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
                if (practiceMemorizationScreen) {
                    practiceMemorizationScreen.style.display = 'none';
                    practiceMemorizationScreen.classList.remove('closing');
                }
                
                // Î≥¥Ïä§ Ïä§ÌÜ†Î¶¨ ÌôîÎ©¥ÏóêÏÑú Î∞±Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ ÌÉÄÏù¥ÌãÄ ÌôîÎ©¥ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
                if (bossStoryScreen) {
                    bossStoryScreen.style.display = 'none';
                    bossStoryScreen.style.visibility = '';
                    bossStoryScreen.style.opacity = '';
                    bossStoryScreen.style.zIndex = '';
                    bossStoryScreen.style.pointerEvents = '';
                    bossStoryScreen.classList.remove('closing');
                }
                
                // Í≤åÏûÑ ÌôîÎ©¥, Î≥¥Ïä§ Ïä§ÌÜ†Î¶¨ ÌôîÎ©¥, Ïó∞Ïäµ Î™®Îìú ÌôîÎ©¥Ïùº Îïå start-screen ÌëúÏãú
                if (isGameScreen || isBossStoryScreen || isPracticeMemorizationScreen) {
                    startScreen.style.display = 'flex';
                    // z-index Î≥µÏõê
                    startScreen.style.zIndex = '';
                    
                    // Î≤ÑÌäº Ïò§Î≤ÑÎ†àÏù¥ ÎèôÍ∏∞Ìôî (Ïù¥ÎØ∏ÏßÄ Î°úÎìú ÌõÑ)
                    setTimeout(() => {
                        if (typeof syncTitleButtonOverlay === 'function') {
                            syncTitleButtonOverlay();
                        }
                    }, 100);
                }
                
                // ÌûàÏä§ÌÜ†Î¶¨ Ï°∞Ïûë Î∞©ÏßÄ
                history.pushState(null, '', window.location.href);
            }
        });

        // Ï¥àÍ∏∞ ÌûàÏä§ÌÜ†Î¶¨ ÏÉÅÌÉú Ï∂îÍ∞Ä
        history.pushState(null, '', window.location.href);
    </script>

</body>

</html>